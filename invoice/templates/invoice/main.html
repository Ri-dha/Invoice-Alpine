<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://unpkg.com/alpinejs@3.10.4/dist/cdn.min.js"></script>
    <meta charset="UTF-8">
    <title>Ridha's invoice</title>
</head>
<body class="bg-stone-300">
    <!-- upper header and picture -->
<section class="border-double border-4 border-sky-500 bg-white max-w-7xl m-16 p-2 mx-auto "
x-data="{
    InvoiceItem: JSON.parse(localStorage.getItem('InvoiceItem') || '[]'),
      addNewField() {
        this.InvoiceItem.push({});
      },
      removeField(field) {
        this.InvoiceItem.splice(this.InvoiceItem.indexOf(field), 1);
      },
    };"
   x-init="$watch('InvoiceItem', (val) => localStorage.setItem('InvoiceItem', JSON.stringify(val)))">
    <div class="lg:flex lg:items-center lg:justify-between">
            <div>
                <h2 class="text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-3xl sm:tracking-tight">INVOICE #</h2>
                <input type="text" placeholder="id" class="bg-gray-200  border-sky-500 rounded-md ">
                <div>
                    <div class="w-32 h-32 mb-1 border rounded-lg overflow-hidden relative bg-gray-100">
                        <img id="image" class="object-cover w-full h-32" src="https://placehold.co/300x300/e2e8f0/e2e8f0" />
    
                        <div class="absolute top-0 left-0 right-0 bottom-0 w-full block cursor-pointer flex items-center justify-center" onClick="document.getElementById('fileInput').click()">
                            <button type="button"
                                style="background-color: rgba(255, 255, 255, 0.65)"
                                class="hover:bg-gray-100 text-gray-700 font-semibold py-2 px-4 text-sm border border-gray-300 rounded-lg shadow-sm"
                            >
                            + Add Logo
                            </button>
                        </div>
                    </div>
                    <input name="photo" id="fileInput" accept="image/*" class="hidden" type="file" onChange="let file = this.files[0];
                        var reader = new FileReader();
    
                        reader.onload = function (e) {
                            document.getElementById('image').src = e.target.result;
                            document.getElementById('image2').src = e.target.result;
                        };
    
                        reader.readAsDataURL(file);
                    ">
                </div>
            </div>

            </div>
          </h2>
          
    </div>
<!-- Billing Info -->
    <div class="grid gap-6 mb-6 md:grid-cols-2">
        <div>
            <label for="first_name" class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300">FROM:</label>
            <input type="text"  class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="COMPANY" required>
        </div>
        <div>
            <label for="first_name" class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300">BILL TO:</label>
            <input type="text"  class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="NAME" required>
        </div>
        <div>
            <label for="first_name" class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300">SHIPING ADDRESS:</label>
            <input type="text"  class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="ADRESS" required>
         </div>  
        <div>
            <label for="phone" class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300">DATE:</label>
            <input type="date" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder=""  required>
        </div>
        <div>
            <label for="website" class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300">DUE DATE:</label>
            <input type="date"  class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="" required>
        </div>
        <div>
            <label for="visitors" class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300">PO NUMBER</label>
            <input type="number" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="" required>
        </div>
    </div>
    <div class="flex -mx-1 border-b-2 border-black py-2 items-start">
        <div class="flex-1 px-1">
            <p class="text-gray-800 uppercase tracking-wide text-sm font-bold">Item Description</p>
        </div>

        <div class="px-1 w-20 text-right">
            <p class="text-gray-800 uppercase tracking-wide text-sm font-bold">Quantity</p>
        </div>

        <div class="px-1 w-32 text-right">
            <p class="leading-none">
                <span class="block uppercase tracking-wide text-sm font-bold text-gray-800">Unit Price</span>
                
            </p>
        </div>

        <div class="px-1 w-32 text-right">
            <p class="leading-none">
                <span class="block uppercase tracking-wide text-sm font-bold text-gray-800">Amount</span>
                
            </p>
        </div>

        <div class="px-1 w-20 text-center">
        </div>
    </div>

    <!-- Items Info -->
    <template x-for="(field, index) in InvoiceItem" :key="index">
        <tbody>
        <tr class="bg-white border-b">
            <th scope="row" class="py-3 px-10 font-medium text-gray-900 whitespace-nowrap">
                <input type="text" placeholder="product" x-model="field.NAME"
                       class="border-2 p-1 rounded-md w-full">
            </th>
            <td class="py-3 ">
                <input type="number" placeholder="QTY" min="0" x-model="field.QTY"
                       class="border-2 p-1 rounded-md">
            </td>
            <td class="py-3 px-10">
                <input type="number" placeholder="Unit price" min="0" x-model="field.UP"
                       class="border-2 p-1 rounded-md">
            </td>
            <td class="py-3 px-10">
                
                <p x-text="field.QTY & field.UP ? field.UP * field.QTY + ' $' : field.UP ? field.UP * 1 + ' $' : 0"></p>
            </td>
            <td class="py-3 px-3">
                <button
                        type="button"
                        class="focus:outline-none text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900"
                        @click="removeField(field)"
                >
                    Remove
                </button>
            </td>
        </tr>
        </tbody>
        
    </template>

</table>
<div class="flex justify-start">
    <button type="button" class="py-2.5 px-5 mr-2 mb-2 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700" @click="addNewField()">+ Line
        Product
    </button>
</div>

<!-- Final Info -->
<div class="flex justify-end">
    <div class="w-1/3">
        <div class="flex justify-between">
            <p class="text-gray-800 uppercase tracking-wide text-sm font-bold">Subtotal</p>
            <p class="text-gray-800 uppercase tracking-wide text-sm font-bold" x-text="InvoiceItem.reduce((acc, item) => acc + (item.QTY * item.UP), 0) + ' $'"></p>
        </div>
        <div class="flex justify-between">
            <p class="text-gray-800 uppercase tracking-wide text-sm font-bold">Tax</p>
            <p class="text-gray-800 uppercase tracking-wide text-sm font-bold" x-text="InvoiceItem.reduce((acc, item) => acc + (item.QTY * item.UP), 0) * 0.2 + ' $'"></p>
        </div>
        <div class="flex justify-between">
            <p class="text-gray-800 uppercase tracking-wide text-sm font-bold">Total</p>
            <p class="text-gray-800 uppercase tracking-wide text-sm font-bold" x-text="InvoiceItem.reduce((acc, item) => acc + (item.QTY * item.UP), 0) * 1.2 + ' $'"></p>
        </div>
    </div>

</div>

</section>




</body>
</html>